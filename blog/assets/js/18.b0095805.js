(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{220:function(s,t,a){"use strict";a.r(t);var e=a(0),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"docker安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装mysql"}},[s._v("#")]),s._v(" docker安装mysql")]),s._v(" "),a("p",[s._v("mysql -uroot -p root")]),s._v(" "),a("ol",[a("li",[s._v("拉去镜像")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker pull mysql\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("创建挂载文件夹")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p ~/mysql/data ~/mysql/logs ~/mysql/conf\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("部署mysql")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(":3306 --name mysql3306 -v ~/mysql/conf:/etc/mysql/conf.d -v ~/mysql/logs:/logs -v ~/mysql/data:/var/lib/mysql -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Pass1234. -d mysql\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("通过navicat 连接数据库测试")])]),s._v(" "),a("blockquote",[a("p",[s._v("连接测试的时候会报2045的错误  因为最新的mysql的密码加密方式与原来的加密方式不同 需要进到mysql里边去修改")])]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[s._v("修改mysql加密方式")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过docker 进入到mysql容器里边")]),s._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it 容器ID /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入到mysql里边")]),s._v("\nmysql -uroot -p 密码\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询加密方式")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" Host,User,plugin from mysql.user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n查询结果\n+-----------+------------------+-----------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Host      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" User             "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" plugin                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-----------+------------------+-----------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" %         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" root             "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" %         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" vuluser          "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" caching_sha2_password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n---------------------\n查询结果如上，在老版本里，一般使用加密方式为mysql_native_password，因为认证方式改变导致的。\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改加密方式（将用户的加密方式改为mysql_native_password，密码为root。）")]),s._v("\nalter user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified with mysql_native_password by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行命令flush privileges使权限配置项立即生效")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("flush privileges；\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后exit 退出容器 重新连接即可")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);